---
title: 'Chaining Middleware'
description: 'Chaining multiple middleware functions.'
sidebar:
  order: 16
  label: 'Chaining Middleware'
  draft: false
---

import { LinkButton } from '@astrojs/starlight/components';

## The Security Gauntlet

We don't just have to rely on `app.use()` (global middleware). We can line up multiple middleware functions for a specific route.

Think of it as a series of laser gates. You have to pass **every single one** to get to the destination.

<img
  src="/assets/lessons/02-server-express-way/16-sequential-tunnel.png"
  alt="A long sci-fi tunnel with multiple glowing scanner rings spaced out sequentially."
  width="100%"
/>

_Fig 1: Sequential Processing. One path, multiple rings._

```javascript
app.get(
  '/vip-lounge',
  logger, // 1. Ring 1: Log the attempt
  authCheck, // 2. Ring 2: Check the ID
  suitCheck, // 3. Ring 3: Check the dress code
  (req, res) => {
    // 4. Destination Reached
    res.send('Welcome to the Platinum Club.');
  }
);
```

### Breaking the Chain (Early Exit)

Express runs these functions in strict order (left to right, top to bottom).

**Crucial Logic:** If _any_ middleware sends a response (e.g., `res.status(403).send(...)`), the chain **stops immediately**. The subsequent functions never run. The request is "ejected" from the gauntlet.

### Reusability (Standardized Equipment)

Think of middleware like **Standardized Security Equipment**.

You have a "Metal Detector" (middleware). You can install that _same_ machine at the Stadium Entrance, the Airport Gate, and the Court House.

- You write the logic **once**.
- You apply it to **many** different routes.

You don't build a custom metal detector for every door. You just move the equipment where you need it.

---

## Extra Bits & Bytes

<LinkButton
  href="https://github.com/ProfessorSolo/Node2Know-ExpressMiddlewareChaining"
  variant="primary"
  icon="external"
  target="_blank"
>
  Express Middleware Chaining - Demo Repo
</LinkButton>

<LinkButton
  href="https://expressjs.com/en/5x/api.html#app.method"
  icon="external"
  variant="secondary"
  target="_blank"
>
  Express API: App Methods
</LinkButton>

<div class="next-step">
  <h3>‚è≠ Surveillance</h3>
  <p>Writing loggers is boring. Let's install a camera.</p>
</div>
