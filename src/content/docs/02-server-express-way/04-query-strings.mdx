---
title: "Query Strings"
description: "Handling optional data with Query Strings."
sidebar:
  order: 4
  label: "Query Strings"
  draft: false
---

import { LinkButton } from "@astrojs/starlight/components";

## Extra Baggage

Query strings are for extra baggage. They don't change the route path itself (the destination), but they carry extra info. We know, the stuff after the `?` in a URL.

<img
  src="/assets/lessons/02-server-express-way/04-query-luggage.png"
  alt="A futuristic open trunk of a cyberpunk sports car containing glowing holographic luggage with digital tags reading ?sort=desc and ?keyword=turbo."
  width="100%"
/>

_Fig 1: The Luggage._

`http://localhost:3000/search?keyword=turbo&sort=desc`

In standard HTTP parsing, we'd have to split this string manually. Express, being the luxury vehicle it is, parses these automatically into `req.query`.

```javascript
app.get("/search", (req, res) => {
  const { keyword, sort } = req.query;

  // req.query = { keyword: 'turbo', sort: 'desc' }

  if (!keyword) {
    return res.send("Please specify a keyword.");
  }

  res.send(`Searching for ${keyword} sorted by ${sort}`);
});
```

### The Difference

- **Params (`:id`)**: Essential to the resource. The ID _defines_ what we are fetching. (The Destination).
- **Query (`?sort=desc`)**: Optional modifiers. Filtering, sorting, pagination. (The Luggage).

If we don't send a query string, `req.query` is just an empty object. No baggage, no problem.

### Rules of the Road

**1. Route Matching:**
Query strings are **not** part of the route path matching.

- Request: `/search?q=pizza`
- Route: `app.get('/search', ...)`
- **Result:** Match. Express ignores the query string when finding the right handler.

**2. Common Use Cases:**

- **Filtering:** `?category=shoes&color=red`
- **Sorting:** `?sort=price_asc`
- **Pagination:** `?page=2&limit=20`
- **Search:** `?q=cyberpunk`

:::caution[Professor Solo's Directive (Security)]
**Never** put sensitive data in query strings. No passwords, no API tokens, no credit card numbers. Start logic: URLs are logged in browser history, server logs, and proxy servers. If you put a password in a query string, you just broadcast it to the world. ASCII-clear luggage only.
:::

---

## Extra Bits & Bytes

<LinkButton
  href="https://masteringjs.io/tutorials/express/query-parameters"
  icon="external"
  variant="secondary"
  target="_blank"
>
  Mastering JS: Query Params
</LinkButton>

<div class="next-step">
  <h3>‚è≠ Traffic Types</h3>
  <p>Are we picking up or dropping off? Time to sort traffic by HTTP Method.</p>
</div>
