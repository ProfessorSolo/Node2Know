---
title: 'Router Base Paths'
description: 'Mounting routers to a base path.'
sidebar:
  order: 8
  label: 'Router Base Paths'
  draft: false
---

import { LinkButton } from '@astrojs/starlight/components';

## Merging Traffic Routers

We have our `thingRouter.js`, but `app.js` needs to know about it. We connect them using `app.use()`, and we give it a **Base Path**.

<img
  src="/assets/lessons/02-server-express-way/08-base-path-ramp.png"
  alt="Futuristic highway output sign reading EXIT: /things. Perspective from inside a cyberpunk car."
  width="100%"
/>

_Fig 1: Taking the Exit._

### `app.js`

```javascript
const thingRouter = require('./routes/thingRouter');

// Mount the router
// Any request starting with "/things" goes here
app.use('/things', thingRouter);
```

### Context Awareness

The magic here is that inside `thingRouter.js`, the router **doesn't know** about the `/things` prefix. It only cares about what comes _after_.

**Once you take the exit, you are no longer on the highway.**

When we mount a router on `/things`, Express strips that part of the URL off before handing the request to the router.

- **Request URL:** `/things/42`
- **Main App sees:** `/things` -> passes control to `thingRouter`
- **Router sees:** `/42`

So inside `thingRouter.js`, we must REMOVE the prefix we added in the previous lesson:

```javascript
// routes/thingRouter.js

// OLD (Wrong inside a mounted router)
// router.get('/things', ...)

// NEW (Correct)
// Matches /things/
router.get('/', (req, res) => res.send('List of Things'));

// Matches /things/:id
router.get('/:id', (req, res) => res.send('Details of Thing'));
```

We've effectively removed the repetitive `/things` prefix from inside the router file.

:::caution[Solo Warning]
If you accidentally include `/things` inside the router file AND in the `app.use` base path, your URL becomes `/things/things/42`. Don't double-dip.
:::

---

## Extra Bits & Bytes

<LinkButton
  href="https://github.com/ProfessorSolo/Node2Know-ExpressRouterBasePaths"
  variant="primary"
  icon="external"
  target="_blank"
>
  Express Router with Base Paths - Demo Repo
</LinkButton>

<LinkButton
  href="https://expressjs.com/en/guide/routing.html#express-router"
  icon="external"
  variant="secondary"
  target="_blank"
>
  Express Guide: Router
</LinkButton>

<div class="next-step">
  <h3>‚è≠ Delivery</h3>
  <p>
    Traffic is flowing. Now let's talk about the cargo. How do we send a
    response?
  </p>
</div>
