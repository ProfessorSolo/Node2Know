---
title: "Working with HTTP"
description: "Creating a basic HTTP server with Node.js."
sidebar:
  order: 9
  label: "HTTP"
draft: false
---

import { LinkButton } from "@astrojs/starlight/components";

## The Hotel Front Desk (The http Module)

If Node.js is our **Hotel Construction Site**, the **`http` module** is like the **Front Desk**. Usually, you don't build a front desk from scratch‚Äîyou just hire a concierge. But in Node, we have the power to build the desk and train the concierge ourselves.

The `http` module allows our application to listen for incoming **requests** (Guests) and send back **responses** (Room Keys, Directions, or "Sorry, we're full").

Fundamentally, this is all a web server does: **Listen for a Guest ‚Üí Do something for them ‚Üí Send them on their way.**

---

### **1. Hiring the Concierge (`createServer`)**

We create a server by calling `http.createServer()`. This method takes a **callback function**‚Äîthink of this as the **Standard Operating Procedure (SOP)** manual for your concierge. Every time a guest (Request) arrives, the concierge follows these exact steps.

### **2. The Interaction**

- **`req` (Request)**: The Guest. Contains details like what they want (URL), who they are (Headers), and any luggage they brought (Data).
- **`res` (Response)**: The Service. This is what we give back to the guest. It could be a webpage, some JSON data, or a 404 error.

---

### **The Code: Building the Desk**

Let's build a minimalist server. Notice how we "train" the server to say "Hello" to everyone who visits.

```javascript
"use strict";

// 1. Bring in the 'http' blueprint (Load the core module)
const http = require("http");

// 2. Define where our hotel is located
const hostname = "127.0.0.1"; // The 'localhost' address
const port = 3000; // The specific door number

// 3. Create the Server (Hire the Concierge)
// The callback runs EVERY time a request hits the server
const server = http.createServer((req, res) => {
  // --- The Concierge's SOP ---

  // A. Set the status (200 OK = "Welcome, everything is fine!")
  res.statusCode = 200;

  // B. Tell the browser what kind of package we are giving them
  // "Content-Type: text/plain" means "Here is simple text, not a flashy HTML page."
  res.setHeader("Content-Type", "text/plain");

  // C. Hand over the package and close the transaction
  res.end("Hello Node Server! I am your concierge.");
});

// 4. Open for Business (Listen on the port)
server.listen(port, hostname, () => {
  console.log(`üè® Server running at http://${hostname}:${port}/`);
});
```

> [!TIP]
> **Try it out!**
>
> 1.  Run the script: `node server.js` (or whatever you named it).
> 2.  Go to `http://localhost:3000` in your browser.
> 3.  **Micro-Challenge**: Change the `res.end` message to something else and restart the server. Notice you have to restart it to see changes? (Unless you use `nodemon` from the previous lesson!)

---

### **Diagram: The Request-Response Cycle**

![The Request-Response Cycle](/assets/lessons/01-intro-to-node/request-response-cycle.png)

---

## Extra Bits & Bytes

<LinkButton
  href="https://nodejs.org/api/http.html"
  variant="secondary"
  icon="external"
>
  Node.js HTTP Docs
</LinkButton>

### ‚è≠ Next Step

Our server file works, but it's getting a bit crowded. In a real hotel, the Concierge doesn't also cook the food, clean the rooms, and park the cars. They call strictly specialized staff for that.

It's time to **organize our code** by hiring some specialists.

[Loading Modules (CommonJS)](./09-common-js)
